=== I_EHR_SERVICE Interface

[cols="^1,2,3"]
|===
h|*Interface*
2+^h|*I_EHR_SERVICE*

h|*Description*
2+a|Interface to EHR persistent repository.

h|*Functions*
^h|*Signature*
^h|*Meaning*

h|
|*has_ehr* (auth_tok: `String`, ehr_id: `UUID`): `Boolean`
a|Return True if a EHR with identifier ehr_id exists.

h|
|*has_ehr_for_subject* (auth_tok: `String`, a_subject_id: `String`): `Boolean`
a|Returns True if there are EHR(s) for a_subject_id.

h|
|*create_ehr* (auth_tok: `String`): `UUID` +
*_Post_has_ehr_*: has_ehr (auth_tok, Result)
a|Create a new EHR and return its EHR id.

h|
|*create_ehr_with_id* (auth_tok: `String`, an_ehr_id: `UUID`): `UUID` +
*_Pre_no_duplicate_*: not has_ehr (auth_tok, an_ehr_id)
a|Create a new EHR with a provided EHR id; return the id as a safety check.

h|
|*create_ehr_with_subject* (auth_tok: `String`, a_subject_id: `String`): `UUID`
a|Create a new EHR using a provided subject_id, and return its EHR id.

h|
|*create_ehr_with_id_and_subject* (auth_tok: `String`, an_ehr_id: `UUID`, a_subject_id: `String`): `UUID` +
*_Pre_no_duplicate_*: not has_ehr (auth_tok, an_ehr_id)
a|Create a new EHR with EHR id and provided subject id. Return the EHR id as a safety check.

h|
|*get_ehr* (auth_tok: `String`, an_ehr_id: `UUID`): `EHR_SUMMARY` +
*_Pre_has_ehr_*: has_ehr (auth_tok, an_ehr_id)
a|Retrieve a summarised form of the EHR root object and EHR_STATUS.

h|
|*get_ehrs_by_subject_id* (auth_tok: `String`, a_subject_id: `String`): `List<EHR_SUMMARY>`
a|Retrieve EHR or EHRs that have ehr_status.subject_id = supplied subject id.

h|
|*i_ehr*: `I_EHR`
a|Create an I_EHR interface instance for access to the parts of an EHR.
|===
